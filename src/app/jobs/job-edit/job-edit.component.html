<form [formGroup]="workOrderForm" (ngSubmit)="onSubmit()">
<ul class="nav nav-tabs">
  <li (click)="onSelectTab('info')"  [ngClass]="loadedTab=='info'? 'active':null"><a>Customer info</a></li>
  <li (click)="onSelectTab('picture')" [ngClass]="loadedTab=='picture'? 'active':null"><a>Pictures</a></li>
  <li (click)="onSelectTab('appliances')" [ngClass]="loadedTab=='appliances'? 'active':null"><a>Appliances</a></li>
  <li (click)="onSelectTab('parts')" [ngClass]="loadedTab=='parts'? 'active':null"><a>Parts</a></li>
  <div class="pull-right"><button
  [disabled]="!workOrderForm.valid"
  type="submit"  class="btn btn-success">Save</button>
  <button (click)="onCancel()" type="button" class="btn btn-danger">Cancel</button></div>
</ul>
      <!-- CUSTOMER INFO -->
      <div  *ngIf="loadedTab == 'info'">
      <div class="row">
        <div class="col-md-6"> <!--left column: customer infor beginning-->
          <label for="">Customer information</label>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Name</span>
            <input
            formControlName="name"
            type="text"
            id="name"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Phone</span>
            <input
            formControlName="phone"
            type="text"
            id="phone"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Number</span>
            <input
            formControlName="houseNumber"
            type="text"
            id="address"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Street</span>
            <input
            formControlName="street"
            type="text"
            id="street"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">City</span>
            <input
            formControlName="city"
            type="text"
            id="city"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Zip</span>
            <input
            formControlName="zip"
            type="text"
            id="zip"
            class="form-control">
            </div>
          </div>
        </div><!--left column end-->
        <div class="col-md-6"><!--right column:insurance infor beginning-->
          <label for="">Insurance Information</label>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Work Order</span>
            <input
            formControlName="workOrderNumber"
            type="text"
            id="workOrderNumber"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Date added</span>
            <input
            type="date"
            id="workOrderNumber"
            class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Description</span>
            <textarea
            formControlName="description"
            type="text"
            id="description"
            class="form-control"
            rows="3">
            </textarea>
            </div>
          </div>
        </div><!--right column end-->
      </div>
    </div>
    <!-- END CUSTOMER INFO -->
      <!-- PICTURES -->
      <div  *ngIf="loadedTab=='picture'">
      <div class="row" formArrayName='images'>
        <div class="col-sm-6 col-md-4 col-lg-3"
        *ngFor="let image of imagesControls; let i=index;"
        [formGroupName]="i">
          <a href="" data-lightbox="photos"><img class="img-fluid img-thumbnail" style=" width: 300px; height: auto" [src]="imagePath.value">
          <div style="top:0; right: 0;"
           class="btn btn-danger">X</div>
          </a>
          <input style="display: none;"
            type="text" name="" id="" formControlName="imagePath" #imagePath>
        </div>
      </div>
    </div>
    <!-- END PICTURES -->
    <!-- APPLIANCES -->
                      <!-- APPLIANCES -->
    <div *ngIf="loadedTab=='appliances'">
        <div formArrayName="appliances">
           <div *ngFor="let appliance of applianceControls;let i=index;"
           [formGroupName]="i">
           <div class="row vertical-align ">
           <div class="col-xs-11">
                <div class="row" >
                    <div class="col-xs-12">
                       <label for="applianceName">Appliance name</label>
                       <input
                       type="text"
                       id="applianceName"
                       class="form-control"
                       formControlName="applianceName">
                    </div>
                </div>
                        <div class="row">
                        <div class="col-xs-12 col-md-6">
                          <div class="form-group">
                            <label for="model">Model #</label>
                            <input
                            type="text"
                            formControlName="model"
                            id="model"
                            class="form-control">
                          </div>
                        </div>
                        <div class="col-xs-12 col-md-6">
                          <div class="form-group">
                            <label for="serial">Serial #</label>
                            <input
                            formControlName="serial"
                            type="text"
                            id="serial"
                            class="form-control">
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-xs-12 col-md-12">
                          <div class="form-group">
                            <label for="description">Description</label>
                              <textarea
                              class="form-control"
                              id="description"
                              formControlName="applianceDescription"
                              ></textarea>
                          </div>
                        </div>
                      </div>
           </div>
           <!-- Delete appliance button -->
           <div class="col-xs-1">
              <button
              type="button"
              class="btn btn-danger"
              (click)="onDeleteAppliance(i)">X</button>
           </div>
          </div>
                      </div>
                      <hr>
                      <button
                      type="button"
                      class="btn btn-success"
                      (click)="addAppliance()">Add Appliance</button>
                    </div>
                  </div>
                      <!-- END APPLIANCES -->
    <!-- END APPLIANCES -->
      <!-- parts -->
      <div *ngIf="loadedTab == 'parts'">
      <div class="row">
        <div class="col-xs-12">
          <div class="col-xs-3">
            <label for="partName">Part #</label>
          </div>
          <div class="col-xs-5">
            <label for="partName">Part description</label>
          </div>
          <div class="col-xs-2">
            <label for="partName">Quantity</label>
          </div>
        </div>
      </div>
        <div class="row" >
          <div class="col-xs-12" formArrayName="parts">
            <div class="row"
            *ngFor="let part of controls;let i=index;"
            [formGroupName]="i"
            style="margin-top: 10px;">
              <div class="col-xs-3">
                <input
                formControlName="number"
                type="text"
                class="form-control">
              </div>
              <div class="col-xs-5">
                <input
                formControlName="name"
                type="text"
                class="form-control">
              </div>
              <div class="col-xs-2">
                <input
                formControlName="quantity"
                type="number"
                class="form-control">
              </div>
              <div class="col-xs-2">
                <button
                class="btn btn-danger"
                type="button"
                (click)="onDeletePart(i)">X</button>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-xs-12">
                <button type="button" class="btn btn-success" (click)="addPart()">Add part</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  <!-- </div>
</div> -->
